{% extends 'default.html' %}
{% load i18n %}
{% load custom_filters %}

{% block content %}
<div class="post-details">
    <h4>{% trans "Post" %}</h4>
    <div class="post-info">
        <p><strong>{% trans "Author" %}:</strong> {{ post.author }}</p>
        <p><strong>{% trans "Heading" %}:</strong> {{ post.title }}</p>
        <p><strong>{% trans "Date of publication" %}:</strong> {{ post.created_at|date:'d M Y' }}</p>
        <p><strong>{% trans "Content" %}:</strong> {{ post.text|safe }}</p>
        <p><strong>{% trans "Category" %}:</strong>
            {% for cat in post.category.all %}
                {{ cat.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </p>
    </div>

    {% if request.user.author == post.author %}
    <div class="post-actions">
        <a href="{% url 'post_delete' post.id %}" class="button delete">{% trans "Delete" %}</a>
        <a href="{% url 'post_edit' post.id %}" class="button edit">{% trans "Edit" %}</a>
    </div>
    {% endif %}

    <div class="reply-button">
        <a href="{% url 'reply_create' post.id %}" class="button reply">{% trans "Reply" %}</a>
    </div>

    <hr class="divider">

    <h4>{% trans "All replies" %}</h4>
    {% if post.reply_set.all %}
        <div class="replies">
            {% for reply in post.reply_set.all %}
                {% if reply.is_accepted %}
                <div class="reply">
                    <p><strong>{% trans "Author" %}:</strong> {{ reply.user }}</p>
                    <p><strong>{% trans "Date of publication" %}:</strong> {{ reply.created_at|date:'d M Y' }}</p>
                    <p><strong>{% trans "Content" %}:</strong> {{ reply.text|safe }}</p>
                </div>
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        <p>{% trans "No replies found" %}</p>
    {% endif %}
</div>
{% endblock content %}
